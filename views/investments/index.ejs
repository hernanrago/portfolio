<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <style>
      table { border-collapse: collapse; width: 100%; margin: 20px 0; }
      th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
      th { background-color: #f2f2f2; }
      .btn { padding: 5px 10px; margin: 2px; text-decoration: none; border-radius: 3px; }
      .btn-primary { background-color: #007bff; color: white; }
      .btn-success { background-color: #28a745; color: white; }
      .btn-danger { background-color: #dc3545; color: white; }
      .btn-secondary { background-color: #6c757d; color: white; }
    </style>
  </head>
  <body>
    <h1><%= title %></h1>
    
    <a href="/investments/new" class="btn btn-success">New Investment</a>
    
    <% if (investments.length > 0) { %>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Date</th>
            <th>Broker</th>
            <th>Instrument</th>
            <th>Sold</th>
            <th>Purchase Price</th>
            <th>Current Price</th>
            <th>Return ARS %</th>
            <th>Return USD %</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% investments.forEach(function(investment) { %>
            <tr>
              <td><%= investment.id %></td>
              <td><%= investment.date %></td>
              <td><%= investment.broker %></td>
              <td><%= investment.instrument %></td>
              <td><%= investment.sold ? 'Yes' : 'No' %></td>
              <td>$<%= investment.purchase_price.toFixed(2) %></td>
              <td>$<%= investment.current_price.toFixed(2) %></td>
              <td><%= investment.return_percentage_ARS.toFixed(2) %>%</td>
              <td><%= investment.return_percentage_USD.toFixed(2) %>%</td>
              <td>
                <a href="/investments/<%= investment.id %>" class="btn btn-primary">View</a>
                <a href="/investments/<%= investment.id %>/edit" class="btn btn-secondary">Edit</a>
                <form method="POST" action="/investments/<%= investment.id %>/delete" style="display: inline;">
                  <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure?')">Delete</button>
                </form>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    <% } else { %>
      <p>No investments found. <a href="/investments/new">Create your first investment</a>.</p>
    <% } %>
    
    <a href="/">Back to Home</a>
  </body>
</html>